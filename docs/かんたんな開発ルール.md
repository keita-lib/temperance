# Temperance の開発ルール（中学生向け）

このプロジェクトで気をつけることを、できるだけやさしい言葉でまとめました。迷ったときはここを読み返してください。

## 1. フォルダの使い方
- `src/` フォルダの中に本体のコードを置きます。
  - 機能ごとのフォルダを `src/modules/XX` のように作り、関連コードをまとめます。
  - 共通のUI部品は `src/components/ui/` に置きます。
  - データベースや設定などは `src/lib/` にまとめます。
  - Hook（React の再利用関数）は `src/hooks/` に置きます。
- テスト用のデータやファイルは `tests/` フォルダに入れます。
- アイコンや画像などの静的ファイルは `public/` に置きます。
- ドキュメントは `docs/` に置きます。
- スクリプト（自動化用の小さなプログラム）は `scripts/` に入れます。

## 2. よく使うコマンド
- 一度だけ `npm install` を実行して必要なパッケージをインストール。
- 開発中は `npm run dev` でプレビューできます。
- 本番用のビルドは `npm run build`、そのあと `npm run start` で確認できます。
- コードのチェックは `npm run lint`、テストは `npm run test` を使います。

## 3. コーディングのルール
- TypeScript を使います。
- インデント（字下げ）は 2 スペース。
- 文の終わりにはセミコロン `;` を付けます。
- 文字列は基本的にシングルクォート `'` を使います。
- React コンポーネント名は `PascalCase`、普通の関数は `camelCase` にします。
- ファイルには必要なことだけを書き、1 ファイル 1 コンポーネントを意識します。
- コミット前に `npm run lint -- --fix` でフォーマットをそろえます。

## 4. テスト
- Vitest + Testing Library を使います。
- DOM を探すときは `screen.getByRole` のようにアクセシビリティを意識した関数を使います。
- モック（テスト用の仮データ）は `tests/mocks` に置いて、`beforeEach` でリセットします。
- ビジネスロジックは、普通のケース（ハッピーパス）と、例外的なケースも両方テストします。
- カバレッジ（どれだけテストされたか）は 90% 以上を目標にします。

## 5. Git と PR の書き方
- コミットメッセージは「Conventional Commits」形式を使います（例 `feat: add landing SE`）。
- コミット本文には、どのテストを実行したかを書いておくと親切です。
- PR（プルリクエスト）は次の内容を含めます。
  1. 短い説明（何を変えたか）
  2. テスト結果や検証手順
  3. UI を変えたならスクリーンショット
  4. レビューしてもらう相手
- 1つの PR は大きすぎないよう、400 行くらいで分けるのがおすすめです。

## 6. セキュリティ・設定
- 秘密の情報（API キーなど）は `.env.local` に書き、Git には含めません。
- どんな環境変数が必要かは `.env.example` に書いておきます。
- 外部から受け取るデータは、`src/lib/api` などで必ず検証してから使います。
- ライブラリのバージョンは固定し、定期的に `npm audit fix` で脆弱性をチェックします。

## 7. Temperance 特有のルール
- SPEC.md がこのプロジェクトの「唯一の正解」です。そこに書いていない機能は作りません。
- 認証やクラウド同期など、MVP（初期バージョン）にない機能は追加しません。
- メンターのレベル2・レベル3機能（LLM を使った高度なアドバイス）は作りません。
- IndexedDB が真実のデータであり、画面も IndexedDB の内容だけを表示します。
- UI では「節約」「管理」などの禁止用語は使わず、SPEC に載っている用語（節制利益など）を使います。
- メンターの文章は説教調にならないようにし、1~2 文で簡潔に。
- 実装はとにかくシンプル・堅実に。動くコードを優先し、迷ったら SPEC どおりの最も簡単な解決方法を選びます。

## 8. 迷ったときは
1. SPEC.md を読み直す。
2. この文書を読み返してルールを確認する。
3. 分からない点があれば、チームメンバーや先輩に相談する。

これだけ守れば、Temperance の開発で迷うことは少なくなるはずです。がんばってください！
